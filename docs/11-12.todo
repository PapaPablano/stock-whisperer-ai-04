### Todo List for November 12, 2025

This list outlines the next steps for enhancing the StockML Analytics application, focusing on building out the Watchlist feature, improving UI/UX, and ensuring backend stability.

---

#### 1. **Frontend - Enhance Watchlist Page (`src/pages/Watchlists.tsx`)**

-   **[ ] Implement "Rename Watchlist" Functionality:**
    -   Create a dialog or inline editing feature triggered by the "Rename" dropdown item.
    -   Update the watchlist name in the `useWatchlistStore`.

-   **[ ] Create a Watchlist Detail View:**
    -   Make each watchlist card clickable, navigating to a new dynamic route like `/watchlists/:id`.
    -   The detail view should list all stocks within that watchlist.

-   **[ ] Implement "Add Stock to Watchlist":**
    -   In the Watchlist Detail View, add a search input to find and add new stocks.
    -   Use the `useStockSearch` hook for the search functionality.
    -   Update the `useWatchlistStore` by calling `addSymbolToWatchlist`.

-   **[ ] Implement "Remove Stock from Watchlist":**
    -   In the Watchlist Detail View, add a "remove" button next to each stock in the list.
    -   Update the `useWatchlistStore` by calling `removeSymbolFromWatchlist`.

-   **[ ] Display Stock Data in Watchlist:**
    -   Instead of just showing symbol avatars, create a `CompactStockCard` component.
    -   This component should display the symbol, name, current price, and daily change.
    -   Fetch real-time data for all visible stocks using the `useStockQuote` hook.

---

#### 2. **Backend - Supabase Function Stability & DX**

-   **[ ] Resolve TypeScript URL Import Errors:**
    -   The Deno runtime handles `https://esm.sh` imports correctly, but the VS Code TypeScript language server shows errors ("Cannot find module").
    -   **Solution:** Create a `deno.json` or `deno.jsonc` file in the `supabase/functions` directory.
    -   Add an `importMap` key to it, pointing to a local `import_map.json` file to map the URLs, which will resolve the TS errors and improve developer experience.

-   **[ ] Final Verification of All Functions:**
    -   Although the `stock-news` function was fixed, a systematic test of all functions (`stock-intraday`, `stock-historical`, `stock-quote`, `stock-search`, `stock-stream`) should be performed.
    -   Create a `test_functions.sh` script with `curl` commands for each endpoint to automate testing.

---

#### 3. **General UI/UX & New Features**

-   **[ ] Create a Stock Detail Page:**
    -   Design a new page that is displayed when a user clicks on a stock from a watchlist or search result.
    -   This page should display:
        -   The main `EnhancedPriceChart`.
        -   Key metrics (open, high, low, close, volume) using `MetricCard`.
        -   Company news from the `NewsWidget`.
        -   Technical indicator charts.

-   **[ ] Persist Zustand State:**
    -   The `useWatchlistStore` is already configured to persist to `localStorage`. Verify this is working as expected across browser sessions.

---
